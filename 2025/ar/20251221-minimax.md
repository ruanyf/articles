# 我如何用 AI 处理历史遗留代码（暨 MiniMax M2.1 体验）

## 一、

最近，我写了好几篇 AI 教程，就收到留言，要我谈谈我自己的 AI 编程。

下面就来分享，我怎么用 AI 编程，也就是大家说的“氛围编程”（vibe coding）。

![](https://cdn.beekka.com/blogimg/asset/202512/bg2025122104.webp)

声明一下，我也是 AI 初级用户，分享的目的除了不想藏私，也是为了抛砖引玉，跟大家交流。

## 二、

首先，**我很少用 AI 生成新项目**。

每次看 AI 产出的代码，总觉得那是别人的代码，不是我的。要是整个项目都用 AI 生成，就丝毫不觉得那是自己的项目。新项目的主体代码，我还是愿意自己写。

**我更多把 AI 用在别人的项目和历史遗留代码**。

我也推荐大家这样用，因为可以避免读懂他人代码的巨大成本。

尤其是历史遗留代码，（1）有时没有文档，也没有作者的说明，（2）技术栈和工具库都过时了，接手这种项目，还要翻找以前的资料，（3）最极端的情况下，它只有构建产物，没有源代码，根本没法改动。

这时，AI 简直就是救星，再古老的代码，它都能读懂和修改，甚至还能对构建产物进行逆向工程。

下面，我就用一个例子，演示 AI 处理历史遗留代码，这基本就是我平时的 AI 用法。

## 三、

以前说过，我使用的 AI 编程工具是 Claude Code，[命令行使用](https://code.claude.com/docs/en/cli-reference)更方便，更容易跟其他命令行工具集成。

我平时使用的 AI 模型，目前是国产的 MiniMax M2。我[测过](https://www.ruanyifeng.com/blog/2025/11/minimax-m2.html)它的功能，相当不错，能够满足需要。

![](https://cdn.beekka.com/blogimg/asset/202512/bg2025122105.webp)

而且，它有包月价（29元人民币），可能是最便宜的编程模型之一，可以放心地大量使用，反复试错。要是用大家都趋之若鹜的 Claude 系列模型，20美元的 Pro 套餐不太够用，200美元的 Max 套餐又太贵。

MiniMax 接入 Claude Code 的方法，参考我的[这篇教程](https://www.ruanyifeng.com/blog/2025/11/doubao-seed-code.html)。如果想在 IDE 里面调用 Claude Code，也是[可以的](https://github.com/cpp-linter/cpp-linter-action)。

## 四、

就在我写这篇文章的时候，MiniMax 本周进行了一次大升级，**M2 模型升级到了 M2.1**。

这意味着，同样的价格现在可以用上更强大的模型。

我挺关心这件事，仔细看了发布说明，本次升级主要有四处增强。

> **（1）多语言支持**（术语叫做 Multi-SWE），对于 Python、Go、TS、JS、Rust、Java、Cpp、C、Solidity 九种语言有专门强化。

> **（2）技术栈优化**，对于 WebDev、AppDev、Rust、Go、Java 等核心技术栈进行了专项优化。

> **（3）速度更快**，代码生成和推理速度都变快了，要比 Gemini 3 Pro、Claude Opus 4.5、ChatGPT 5等模型都快。

> **（4）长程任务更出色**，指令遵循优化。

按照这个说明，M2.1 在常见编程任务的各方面都变强了。

那么，下面的介绍正好测一下，它的 Web 开发能力。我的接入参数如下。

![](https://cdn.beekka.com/blogimg/asset/202512/bg2025122107.webp)

## 五、

这次用作示例的历史遗留项目是 [wechat-format](https://github.com/ruanyf/wechat-format/)，它是一个 Web 应用，将 Markdown 文本转为微信公众号的样式。

![](https://cdn.beekka.com/blogimg/asset/202512/bg2025122101.webp)

上图左侧的文本框输入 Markdown 文本，右侧立刻展示自动渲染的结果，可以把它复制到微信公众号的编辑器，直接发布。

它非常好用，大家可以去[试试看](https://ruanyf.github.io/wechat-format/)。我的公众号现在就用它做排版，效果不错。

问题是，**原作者六年前就放弃了这个项目**，不再更新了。它用的是老版的 Vue.js 和 CodeMirror 编辑器，没有任何文档和说明，代码还经过了编译工具的处理。

如果你不熟悉它的技术栈，想要修改一些地方，就会感到非常困难。这正是 AI 可以帮忙的地方，下面我就用 MiniMax M2.1 来处理这个历史遗留项目。

毋须讳言，这是一个比较简单的项目，没有很高的复杂性，不适合用来评测模型的能力，但是适合演示工作流程，能够帮助大家体会解决问题的思路。

另一方面，就像著名开发者 Simon Willison [最近说的](https://simonwillison.net/2025/Nov/24/claude-opus/)，他感到评测大模型越来越困难，“我识别不出两个模型之间的实质性差异”。因为不管是哪一家公司推出的最新模型，都已经足够强大，足以解决常见任务，要区分它们的强弱必须不断升级评测的难度。

这意味着，对于普通程序员的常见编程任务，不同模型不会构成重大差异，国产模型就很好用，没有必要迷信国外的旗舰模型。

## 六、

接手老项目的第一步，总是把它克隆到本地。

```bash
$ git clone git@github.com:ruanyf/wechat-format.git
```

一般来说，这时总是一头雾水，不知道从何入手。

所以，**第一件事就是让 AI 去解读代码，提供一些思路和信息**。

```bash
$ cd wechat-format
$ claude-minimax
```

上面的 claude-minimax 是一个自定义命令，用来在 Claude Code 里面使用 MiniMax 模型（参见[教程](https://www.ruanyifeng.com/blog/2025/11/doubao-seed-code.html)）。

现在让 AI 来解释这个项目。
